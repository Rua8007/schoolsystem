<div class="row">
  <%= render partial: 'shared/fee_navigation' %>
</div>
<%= stylesheet_link_tag "//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css" %>
<%= javascript_include_tag "https://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js" %>
<%= javascript_include_tag "//cdn.datatables.net/tabletools/2.2.2/js/dataTables.tableTools.min.js" %>
<%= javascript_include_tag "https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js" %>

<script type="text/javascript">
  $(document).ready(function() {
    $('#example thead th').each( function (i, v) {
      // var title = $('#example tfoot th').eq( $(this).index() ).text();
      var title = $(this).text();
      if(title == 'Select All'){
      }
      else{
        if(title != "Actions"){
          $(this).html(
              '<input type="text" style="width: 120px;" class="form-control" id="exampleInputName2" placeholder="'+title+' search">'
          );
        }
        else{
          $(this).html('<div style="width: 170px;">' + title + '</div>');
        }
      }
    });

    // DataTable
    var table = $('#example').DataTable();

    // Apply the search
    table.columns().eq( 0 ).each( function ( colIdx ) {
      $( 'input', table.column( colIdx ).header() ).on( 'keyup change', function () {
        table
            .column( colIdx )
            .search( this.value )
            .draw();
      } );
    } );
  });

</script>

<div class="bg-light lter b-b wrapper-md">
  <h1 class="m-n font-thin h3">Fee Entries
    <% if current_user.role.rights.where(value: 'create_fee_entries').any? %>
        <%= link_to 'New Fee Entry', new_fee_entry_path, class: 'btn btn-primary pull-right' %>
    <% end %>
  </h1>
</div>
<br><br>
<div style="overflow: scroll">
  <table id="example" class="table table-striped table-bordered table-responsive" style="overflow: scroll">
    <thead class= "table-head">
    <tr>
      <th>Name</th>
      <th>Total amount</th>
      <th>Grade</th>
      <th>Mandatory</th>
      <th colspan="2">Actions</th>
    </tr>
    </thead>

    <tbody>
      <% @fee_entries.each do |fee_entry| %>
        <tr>
          <td><%= fee_entry.name %></td>
          <td><%= fee_entry.total_amount %></td>
          <td><%= fee_entry.grade.name if fee_entry.grade.present? %></td>
          <td><%= fee_entry.mandatory ? 'Yes' : 'No' %></td>
          <td><%= link_to 'Edit', edit_fee_entry_path(fee_entry) %></td>
          <td><%= link_to 'Destroy', fee_entry, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>
