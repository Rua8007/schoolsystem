<div class="bg-light lter b-b wrapper-md">
  <h1 class="m-n font-thin h3">KG Subject Result
  </h1>
</div>
<div class="row">
  <div class="col-md-12">
    <%= form_tag(fetch_kg_results_path, method: :post, class: 'col-form class-form', remote: true) do %>
        <div class="form-group col-md-4">
          <label for="class_id"> Select Class</label>
          <%= select_tag 'class_id', options_from_collection_for_select(@grades, :id, :full_name, @grade.id), class: 'form-control class-select'  %>
        </div>
    <% end %>
  </div>
</div>

<hr />
<div class="row">
  <div class="col-md-12" id="subjects">
    <%= render partial: 'kgresults/show_exams_and_subjects', locals: { subjects: @subjects, exams: @exams, klass: @grade } %>
  </div>
</div>

<hr />
<div class="row">
  <div class="col-md-12" id="results">
  </div>
</div>

<script type="text/javascript">

	

  $(document).on('change', '.class-select', function(){
      class_id = $(this).val();
      $.get("/kgresults/get_exams_and_subjects", {grade_id: class_id})
	    .done(function(data){
	      if (data)
	      {
	        $("#error_div_rollnum").removeClass('hide');
	        $("#error_text_rollnum").html($("#roll_Number").val() + " roll number already registered!");
	        $("#roll_Number").val('');
	      }
	      else
	      {
	        $("#error_div_rollnum").addClass('hide');
	      }
	    });


      // $.ajax({
      //     url: '/kgresults/get_exams_and_subjects',
      //     method: 'post',
      //     dataType: 'script',
      //     data: {
      //         class_id: class_id
      //     }
      // });
  });

</script>